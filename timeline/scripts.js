document.addEventListener("DOMContentLoaded", () => {
    const eventsData = {
        "2012": [
            { type: "catastrophe", text: "Октябрь: Группа сталкеров уничтожает Черное Сердце и О-Сознание, что провоцирует глобальный энергетический выброс." },
            { type: "catastrophe", text: "Декабрь: Энергия распространяется по миру, создавая очаги кристаллических мутаций. Первые случаи мутаций фиксируются в Восточной Европе и Сибири." }
        ],
        "2013": [
            { type: "political", text: "Февраль: ООН создает экстренную комиссию для координации международных усилий, но её решения всё чаще игнорируются крупными державами." },
            { type: "scientific", text: "Апрель: НАТО начинает первые исследования кристаллов в секретных лабораториях. США начинают лоббировать усиление централизации внутри альянса." },
            { type: "catastrophe", text: "Июнь: Кристаллы появляются в Польше, Германии и Балтийских странах, вызывая массовую панику. НАТО вводит войска в эти регионы под предлогом 'стабилизации'." }
        ],
        "2014": [
            { type: "political", text: "Январь: Начинается строительство купольных городов в безопасных регионах. США финансируют большинство проектов, усиливая своё влияние в НАТО." },
            { type: "political", text: "Июль: Первые протесты против военного использования кристаллов. Франция и Германия начинают обсуждать возможность выхода из НАТО, но США блокируют эти попытки." },
            { type: "political", text: "Сентябрь: В России начинаются первые массовые протесты против правительства. Сибирь и Дальний Восток требуют большей автономии." }
        ],
        "2015": [
            { type: "political", text: "Январь: Образование культов 'Следующий Шаг' и 'Дети Кристалла'. Эти группы быстро набирают популярность в регионах, наиболее пострадавших от кристаллических мутаций." },
            { type: "political", text: "Июнь: Страны БРИКС активизируют ядерные программы, чтобы противостоять угрозам. Россия начинает укреплять свои границы, опасаясь распада." },
            { type: "political", text: "Декабрь: Турция объявляет о намерении выйти из НАТО, что вызывает кризис в альянсе. США оказывают давление на Анкару, чтобы предотвратить выход." }
        ],
        "2016": [
            { type: "political", text: "Январь: Начало локальных войн за контроль над безопасными зонами. В России вспыхивают вооружённые конфликты между федеральными войсками и региональными группировками." },
            { type: "scientific", text: "Июнь: Разработка суперсолдат в рамках проекта БРИКС с использованием энергии кристаллов. Россия и Китай начинают сотрудничать в этой области." },
            { type: "political", text: "Июнь: Российское правительство теряет контроль над Сибирью, где усиливается влияние «Детей Кристалла». Федеральные войска отступают, оставляя регион под контролем местных кланов." },
            { type: "political", text: "Сентябрь: Китай заявляет о своих правах на ключевые исследования, что вызывает напряжённость в БРИКС. Россия начинает терять контроль над Сибирью, где усиливается влияние 'Детей Кристалла'." }
        ],
        "2017": [
            { type: "scientific", text: "Январь: Культ 'Дети Кристалла' впервые применяет пси-оружие в Сибири. Российские войска терпят поражение, что подрывает авторитет федерального правительства." },
            { type: "political", text: "Март: Бразилия настаивает на сохранении экологических проектов, вступая в конфликт с Китаем. Внутри БРИКС нарастают противоречия." },
            { type: "scientific", text: "Май: Индийские учёные разрабатывают первые кристаллические протезы, дающие сверхспособности. Индия начинает дистанцироваться от БРИКС." },
            { type: "political", text: "Июнь: В Европе массовые протесты против культистов и военного вмешательства НАТО. Франция и Германия снова поднимают вопрос о выходе из альянса." },
            { type: "political", text: "Сентябрь: Индия заявляет о нейтралитете и сосредотачивается на гуманитарных технологиях. ООН теряет авторитет, так как её резолюции всё чаще игнорируются." },
            { type: "political", text: "Сентябрь: Российское правительство теряет контроль над Дальним Востоком, где местные лидеры объявляют о создании Дальневосточной Конфедерации. Москва пытается подавить восстание, но терпит неудачу." }
        ],
        "2018": [
            { type: "political", text: "Февраль: Внутренние противоречия в БРИКС достигают пика. Китай покидает организацию, что приводит к её фактическому распаду." },
            { type: "political", text: "Март: ООН выпускает резолюцию о запрете любых экспериментов с кристаллами, но блок НАТО продолжает тайные разработки. США усиливают давление на страны-члены НАТО, чтобы предотвратить их выход." },
            { type: "catastrophe", text: "Июнь: 'Дети Кристалла' утверждаются в Восточной Сибири, превращая её в своё 'священное место'. Российское правительство теряет контроль над регионом." },
            { type: "scientific", text: "Октябрь: Россия начинает строительство крупного исследовательского центра 'Кварц' в Сибири, но проект саботируется местными группировками." },
            { type: "political", text: "Октябрь: На Урале вспыхивает восстание против центральной власти. Местные промышленники и военные объединяются, чтобы создать Уральскую Республику. Москва пытается подавить мятеж, но силы федерального правительства истощены." },
            { type: "political", text: "Декабрь: ООН окончательно теряет влияние после провала миротворческой миссии в Африке. Организация терпит серьезные сокращения, её функции переходят к региональным альянсам." }
        ],
        "2019": [
            { type: "political", text: "Январь: Первая война между НАТО и 'Следующим Шагом' за контроль над Венгрией и Румынией. США используют конфликт для дальнейшей централизации власти в альянсе." },
            { type: "political", text: "Май: Китай заключает договор с 'Детьми Кристалла' о ненападении, что провоцирует кризис в остатках ООН." },
            { type: "political", text: "Май: Российское правительство теряет контроль над Северным Кавказом, где образуется Кавказский Эмират. Религиозные лидеры объявляют о создании независимого государства." },
            { type: "scientific", text: "Июнь: Индия запускает проект 'Кристалл здоровья' для массового производства медицинских устройств." },
            { type: "catastrophe", text: "Август: В Южной Америке появляются первые очаги кристаллических мутаций, которые уничтожают инфраструктуру. Бразилия начинает терять контроль над своими территориями." },
            { type: "scientific", text: "Ноябрь: Северный альянс (НАТО, Япония и Южная Корея) активирует проект 'Солярис', связанный с очисткой заражённых территорий." },
            { type: "political", text: "Декабрь: Московская Технократия, последний оплот старой Российской Федерации, объявляет о своём существовании. Они контролируют Москву, Санкт-Петербург и несколько прилегающих регионов, но их власть ограничена." }
        ],
        "2020": [
            { type: "scientific", text: "Февраль: 'Следующий Шаг' создаёт первую мобильную армию кристаллизованных солдат, которые устраивают рейды на юг Европы." },
            { type: "political", text: "Июнь: Южная Африка создаёт нейтральную зону в Восточной Африке. Это становится первым шагом к образованию 'Экологической Революции'." },
            { type: "catastrophe", text: "Октябрь: Ядерный взрыв в Восточной Сибири уничтожает одну из крупнейших 'семей' 'Детей Кристалла'. Россия обвиняет культ в провокации, но те отрицают свою причастность." }
        ],
        "2021": [
            { type: "political", text: "Март: Появление 'нейтральных зон' в Восточной Европе, управляемых совместно силами НАТО и 'Следующим Шагом'." },
            { type: "political", text: "Март: Московская Технократия объявляет о своём нейтралитете в глобальных конфликтах, сосредоточившись на защите своих территорий. Россия как единое государство перестаёт существовать, распавшись на несколько независимых кланов: Московская Технократия, Сибирский Альянс, Уральская Республика, Кавказский Эмират, Дальневосточная Конфедерация." },
            { type: "scientific", text: "Март: Индийские исследовательские центры начинают разработку пси-барьеров для защиты от атак 'Детей Кристалла'." },
            { type: "political", text: "Июнь: Индия заключает соглашение с Экологической Революцией об обмене технологиями для восстановления экосистем." },
            { type: "scientific", text: "Сентябрь: НАТО запускает проект 'Антагонист', направленный на создание оружия, разрушающего структуру кристаллов." },
            { type: "scientific", text: "Декабрь: США впервые применяют сверхоружие против 'Следующего Шага', уничтожив базу культа в Варшаве. Это вызывает международное осуждение из-за огромных жертв среди гражданского населения." }
        ],
        "2022": [
            { type: "political", text: "Январь: США вводят полное эмбарго на торговлю с Китаем из-за их сотрудничества с 'Детьми Кристалла'." },
            { type: "political", text: "Апрель: Культ 'Следующий Шаг' активно вербует новые группы в Южной Америке, что вызывает эскалацию насилия в регионе." },
            { type: "political", text: "Октябрь: На Ближнем Востоке образуется 'Ковчег' — новая фракция учёных и беженцев, стремящихся создать 'чистый' мир без кристаллов." },
            { type: "political", text: "Ноябрь: НАТО начинает строительство первой лунной колонии для организации там космодрома." }
        ],
        "2023": [
            { type: "political", text: "Январь: Расширение Ковчега на незанятые территории на Ближнем Востоке." },
            { type: "political", text: "Июнь: Остатки ООН утверждают 'Глобальный протокол адаптации', но его игнорируют большинство фракций." },
            { type: "catastrophe", text: "Сентябрь: 'Дети Кристалла' совершают массовую атаку на Северную Европу, уничтожив несколько крупных объектов НАТО." },
            { type: "scientific", text: "Декабрь: Россия объявляет о завершении строительства центра 'Титановая Река', но он сразу же становится объектом борьбы между московской технократией и сибирскими кланами." }
        ],
        "2024": [
            { type: "catastrophe", text: "Март: Мутационные вспышки в Южной Африке приводят к созданию автономных 'зон природы', где кристаллы и мутации гармонично сосуществуют." },
            { type: "scientific", text: "Август: 'Следующий Шаг' разрабатывает новые технологии телепортации через энергию кристаллов." },
            { type: "political", text: "Сентябрь: НАТО официально распадается, и страны объединяются в Американскую Федерацию Единства (AUF) под руководством США. Это становится ответом на растущие угрозы со стороны культов и мутантов." },
            { type: "political", text: "Ноябрь: Китай запускает проект 'Интеграция' для синхронизации человека и кристаллов, вызывая массовые протесты." },
            { type: "political", text: "Декабрь: Образование независимой колонии на Луне, отделившейся от AUF." }
        ],
        "2025": [
            { type: "political", text: "Январь: Остатки ООН созывают 'Конгресс человечества', но его игнорируют большинство фракций." },
            { type: "political", text: "Февраль: Первый контакт между 'Следующим Шагом' и AUF, целью которого стало обсуждение мирного использования кристаллов." }
        ]
    };

    const timelineItems = document.querySelectorAll(".timeline .year");
    const eventsContainer = document.getElementById("events-container");
    const filter = document.getElementById("event-filter");

    // Функция отображения событий по году
    function displayEvents(year) {
        const events = eventsData[year] || [];
        if (!events.length) {
            eventsContainer.innerHTML = "<h3>Событий за этот год нет.</h3>";
            return;
        }
        
        const filteredType = filter.value;
        const filteredEvents = events.filter(event => filteredType === "all" || event.type === filteredType);

        if (!filteredEvents.length) {
            eventsContainer.innerHTML = "<h3>События данного типа отсутствуют.</h3>";
            return;
        }

        eventsContainer.innerHTML = filteredEvents.map(event => `
            <div class="event ${event.type}">
                <p>${event.text}</p>
            </div>
        `).join("");
    }

    // Переключение активного года
    timelineItems.forEach(item => {
        item.addEventListener("click", () => {
            timelineItems.forEach(year => year.classList.remove("active"));
            item.classList.add("active");
            displayEvents(item.dataset.year);
        });
    });

    // Фильтрация событий
    filter.addEventListener("change", () => {
        const activeYear = document.querySelector(".timeline .year.active");
        if (activeYear) {
            displayEvents(activeYear.dataset.year);
        }
    });
});
